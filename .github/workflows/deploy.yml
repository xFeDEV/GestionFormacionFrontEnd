2025-07-14T03:25:21.5631120Z ##[group]Run appleboy/ssh-action@master
with:
  host: ***
  username: ***
  key: ***
  port: ***
  script: # --- PASO 1: PREPARAR ENTORNO Y CÃ“DIGO ---
cd /home/*/gestionformacionfrontend
echo "ðŸ”„ Actualizando cÃ³digo fuente..."
git fetch origin
git reset --hard origin/main

# --- PASO 2: CONSTRUIR (como ***) ---
echo "ðŸ“¦ Preparando entorno de Node.js..."
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"

echo "âš™ Instalando dependencias..."
npm install

echo "ðŸ”¨ Construyendo la aplicaciÃ³n..."
npm run build

# --- PASO 3: DESPLEGAR (con sudo) ---
echo "ðŸš€ Copiando archivos a Nginx..."
sudo cp -rf dist/* /var/www/GestionFormacionFrontend/

echo "ðŸ”’ Ajustando permisos para Nginx..."
sudo chown -R www-data:www-data /var/www/GestionFormacionFrontend

echo "âœ… Â¡Despliegue completado!"
  protocol: tcp
  timeout: 30s
  command_timeout: 10m
  proxy_port: ***
  proxy_protocol: tcp
  proxy_timeout: 30s
  curl_insecure: false
  capture_stdout: false
Run echo "$GITHUB_ACTION_PATH" >> $GITHUB_PATH
Run entrypoint.sh
Downloading drone-ssh-1.8.1-linux-amd64 from https://github.com/appleboy/drone-ssh/releases/download/v1.8.1
======= CLI Version Information =======
Drone SSH version 1.8.1
=======================================
ðŸ”„ Actualizando cÃ³digo fuente...
bash: line 2: cd: /home/*/gestionformacionfrontend: No such file or directory
fatal: not a git repository (or any of the parent directories): .git
fatal: not a git repository (or any of the parent directories): .git
ðŸ“¦ Preparando entorno de Node.js...
âš™ Instalando dependencias...
npm error code ENOENT
npm error syscall open
npm error path /home/*/package.json
npm error errno -2
npm error enoent Could not read package.json: Error: ENOENT: no such file or directory, open '/home/*/package.json'
npm error enoent This is related to npm not being able to find a file.
npm error enoent
npm error A complete log of this run can be found in: /home/*/.npm/_logs/2025-07-14T03_25_23_072Z-debug-0.log
ðŸ”¨ Construyendo la aplicaciÃ³n...
npm error code ENOENT
npm error syscall open
npm error path /home/*/package.json
npm error errno -2
npm error enoent Could not read package.json: Error: ENOENT: no such file or directory, open '/home/*/package.json'
npm error enoent This is related to npm not being able to find a file.
npm error enoent
npm error A complete log of this run can be found in: /home/*/.npm/_logs/2025-07-14T03_25_23_392Z-debug-0.log
ðŸš€ Copiando archivos a Nginx...
cp: cannot stat 'dist/*': No such file or directory
ðŸ”’ Ajustando permisos para Nginx...
âœ… Â¡Despliegue completado!
===============================================
âœ… Successfully executed commands to all hosts.
===============================================